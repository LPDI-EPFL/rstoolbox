<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>rstoolbox.components.DesignSeries.apply_resfile &#8212; rstoolbox 0.9.0 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/functions.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="rstoolbox.components.DesignSeries.score_by_pssm" href="rstoolbox.components.DesignSeries.score_by_pssm.html" />
    <link rel="prev" title="rstoolbox.components.DesignSeries.make_resfile" href="rstoolbox.components.DesignSeries.make_resfile.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          rstoolbox</a>
        <span class="navbar-text navbar-version pull-left"><b>0.9.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../scripts.html">Scripts</a></li>
                <li><a href="../../tutorial.html">Tutorial</a></li>
                <li><a href="../../api.html">API</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">An introduction to rstoolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../highlights.html">Highlighted works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installing.html">Installing and Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Available direct executables</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tutorial.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rosettascripts.html">RosettaScripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whatsnew.html">What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">rstoolbox.components.DesignSeries.apply_resfile</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="rstoolbox-components-designseries-apply-resfile">
<h1>rstoolbox.components.DesignSeries.apply_resfile<a class="headerlink" href="#rstoolbox-components-designseries-apply-resfile" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="rstoolbox.components.DesignSeries.apply_resfile">
<code class="descclassname">DesignSeries.</code><code class="descname">apply_resfile</code><span class="sig-paren">(</span><em>seqID</em>, <em>filename</em>, <em>rscript=None</em>, <em>keep_input_scores=False</em><span class="sig-paren">)</span><a class="headerlink" href="#rstoolbox.components.DesignSeries.apply_resfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a generated Rosetta <a class="reference external" href="https://www.rosettacommons.org/docs/latest/rosetta_basics/file_types/resfiles">resfile</a>
to the decoy.</p>
<p>This function needs to be created after the appropiate mutant variants have been created
and their corresponding <strong>resfiles</strong> have been written.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depends on <a class="reference internal" href="../../tutorials/options.html#options"><span class="std std-ref">rosetta.path</span></a> and <a class="reference internal" href="../../tutorials/options.html#options"><span class="std std-ref">rosetta.compilation</span></a>,
if the <code class="docutils literal notranslate"><span class="pre">filename</span></code> does not exist.</p>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">This function <strong>REQUIRES</strong> a local installation of <strong>Rosetta</strong>.</p>
</div>
<p>To execute this function it is important that the <code class="docutils literal notranslate"><span class="pre">source_file</span></code> assigned to the
<a class="reference internal" href="../rstoolbox.components.DesignFrame.html#rstoolbox.components.DesignFrame" title="rstoolbox.components.DesignFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DesignFrame</span></code></a> is an original silent file and <strong>not a minisilent</strong>, as the
original structure of the decoy needs to be used in order to generate the variants.
If that is not the case, use <code class="xref py py-class docutils literal notranslate"><span class="pre">DesignFrame.replace_source_files</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>seqID</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Identifier of the sequence of interest</li>
<li><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Name of the final silent file that will contain all the variant’s data.
If the file exists, it is assumed that the data was already created and data will be
directly loaded from that file.</li>
<li><strong>rscript</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – By default, the script executed will be the one generated by
<a class="reference internal" href="../rstoolbox.utils.mutations.html#rstoolbox.utils.mutations" title="rstoolbox.utils.mutations"><code class="xref py py-func docutils literal notranslate"><span class="pre">mutations()</span></code></a>. One can provide its own script (either as the file name of the
script or as a string of the content itself) <strong>as long as it fulfills two conditions</strong>:
(1) It must contain the <strong>AddJobPairData Mover</strong> and (2) it should accept the script
variable <code class="docutils literal notranslate"><span class="pre">resfile</span></code>. An example on how to use these two conditions can be extrapolated
from <a class="reference internal" href="../rstoolbox.utils.mutations.html#rstoolbox.utils.mutations" title="rstoolbox.utils.mutations"><code class="xref py py-func docutils literal notranslate"><span class="pre">mutations()</span></code></a>.</li>
<li><strong>keep_input_scores</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – When <a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> (default <a class="reference external" href="https://docs.python.org/2/library/constants.html#False" title="(in Python v2.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a>), it will keep the
score terms present in the source decoy (as they appear in the original silent file)
for the variants.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="../rstoolbox.components.DesignFrame.html#rstoolbox.components.DesignFrame" title="rstoolbox.components.DesignFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DesignFrame</span></code></a> with the scores for the mutants.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body"><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">SystemError:</th><td class="field-body">If all variants faile to be generated or if they cannot be merged.</td>
</tr>
<tr class="field-even field"><th class="field-name">IOError:</th><td class="field-body">If Rosetta path cannot be found.</td>
</tr>
<tr class="field-odd field"><th class="field-name">AttributeError:</th><td class="field-body">If the resfiles for the variants were not previously created.</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">rstoolbox.io</span> <span class="kn">import</span> <span class="n">parse_rosetta_file</span>
<span class="gp">   ...: </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="gp">   ...: </span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.width&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">df</span> <span class="o">=</span> <span class="n">parse_rosetta_file</span><span class="p">(</span><span class="s2">&quot;../rstoolbox/tests/data/input_2seq.minisilent.gz&quot;</span><span class="p">,</span>
<span class="gp">   ...: </span>                        <span class="p">{</span><span class="s1">&#39;scores&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">],</span> <span class="s1">&#39;sequence&#39;</span><span class="p">:</span> <span class="s1">&#39;B&#39;</span><span class="p">})</span>
<span class="gp">   ...: </span><span class="n">df</span><span class="o">.</span><span class="n">add_reference_sequence</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">get_sequence</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">   ...: </span><span class="n">dfwt</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">generate_mutant_variants</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;TGP&quot;</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;ERG&quot;</span><span class="p">),</span>
<span class="gp">   ...: </span>                                                 <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="s2">&quot;MAT&quot;</span><span class="p">)])</span>
<span class="gp">   ...: </span><span class="c1"># Call in test-mode</span>
<span class="gp">   ...: </span><span class="n">dfwt</span> <span class="o">=</span> <span class="n">dfwt</span><span class="o">.</span><span class="n">make_resfile</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;NATAA&quot;</span><span class="p">,</span> <span class="s2">&quot;mutants.resfile&quot;</span><span class="p">,</span> <span class="n">write</span><span class="o">=</span><span class="bp">False</span> <span class="p">)</span>
<span class="gp">   ...: </span><span class="n">dfwt2</span> <span class="o">=</span> <span class="n">dfwt</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">apply_resfile</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span>
<span class="gp">   ...: </span>                                    <span class="s2">&quot;../rstoolbox/tests/data/variants.silent.gz&quot;</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">dfwt2</span>
<span class="gp">   ...: </span>
<span class="gh">Out[1]: </span><span class="go"></span>
<span class="go">                                                                                                             sequence_B                           description mutants_B mutant_positions_B  mutant_count_B             resfile_B    score    fa_atr   fa_rep    fa_sol  fa_intra_rep  fa_intra_sol_xover4  lk_ball_wtd  fa_elec  pro_close  hbond_sr_bb  hbond_lr_bb  hbond_bb_sc  hbond_sc  dslf_fa13   omega   fa_dun  p_aa_pp  yhh_planarity     ref  rama_prepro  B_ni_mtcontacts  B_ni_rmsd  B_ni_rmsd_threshold  B_ni_trials  GRMSD2Target  GRMSD2Template  LRMSD2Target  LRMSDH2Target  LRMSDLH2Target  design_score  silent_score  time</span>
<span class="go">0  TRPEEARERAWRLAEIAMRKGWEEHEREWEWWKRASKGREERDMLPERMIAAALRAIGEIFNAEWQMRLEMEKERKNPNAGEEKMKEQKKEAWKIAYYWGLMAAYWIKQHREKERK  test_3lhp_binder_labeled_00001                                     0               mutants_0000.resfile -103.093 -1737.208  705.964  1198.941  3.131         63.940              -30.387      -500.969  39.037    -199.416     -3.191       -18.159      -34.962    0.0        36.828  367.855 -27.951   0.0            38.222 -4.768        54.0             0.164      5.0                  1.0          2.192         1.607           5.601         4.96           3.001          -240.251      -103.094       6.0 </span>
<span class="go">1  TRPEEERERAWRLMEIAMRKGWEEHEREWEWWKRASKGREERDMLPERMIAAALRAIGEIFNAEWQMRLEMEKERKNPNAGEEKMKEQKKEAWKIAYYWGLMAAYWIKQHREKERK  test_3lhp_binder_labeled_00001_v0001  A6E,A14M  6,14               2               mutants_0001.resfile -97.919  -1738.503  719.811  1197.301  3.099         64.070              -29.545      -504.421  39.037    -199.416     -3.191       -18.159      -36.017    0.0        36.828  367.395 -28.282   0.0            36.873 -4.799        54.0             0.164      5.0                  1.0          2.192         1.607           5.601         4.96           3.001          -240.251      -97.921        7.0 </span>
<span class="go">2  TRPEEERERAWRLAEIAMRKGWEEHEREWEWWKRASKGREERDMLPERMIAAALRAIGEIFNAEWQMRLEMEKERKNPNAGEEKMKEQKKEAWKIAYYWGLMAAYWIKQHREKERK  test_3lhp_binder_labeled_00001_v0002  A6E       6                  1               mutants_0002.resfile -65.317  -1735.618  743.511  1203.036  3.086         65.985              -32.607      -500.559  35.213    -199.416     -3.191       -16.619      -33.651    0.0        36.828  367.085 -28.339   0.0            34.915 -4.976        54.0             0.164      5.0                  1.0          2.192         1.607           5.601         4.96           3.001          -240.251      -65.318        6.0 </span>
</pre></div>
</div>
</dd></dl>

</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
      
    </p>
    <p>
        &copy; Copyright 2018, Jaume Bonet.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.2.<br/>
    </p>
  </div>
</footer>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-74877325-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-74877325-2');
</script>

  </body>
</html>